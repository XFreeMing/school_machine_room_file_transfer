# 学校机房文件传输系统 - 项目总结

## 项目概述

本项目为学校机房设计了一个简单易用的文件传输系统，实现了老师向学生分发文件和学生提交作业的完整流程。

## 技术架构

### 后端技术栈

- **Python 3.8+**: 主要编程语言
- **Flask**: Web 框架，提供 REST API
- **Flask-CORS**: 处理跨域请求
- **文件系统**: 本地文件存储

### 前端技术栈

- **tkinter**: Python 内置 GUI 库
- **ttk**: 现代化界面组件
- **多线程**: 异步操作处理

### 项目管理

- **uv**: 现代 Python 包管理器
- **PyInstaller**: 打包为 exe 可执行文件

## 系统组件

### 1. 服务器端 (`server/`)

- **`app.py`**: Flask 应用主文件，提供 REST API
- **`file_manager.py`**: 文件管理核心模块
- **功能**: 文件存储、元数据管理、API 接口

### 2. 客户端 (`client/`)

- **`teacher_client.py`**: 老师端图形界面
- **`student_client.py`**: 学生端图形界面
- **`common.py`**: API 客户端公共模块

### 3. 数据存储 (`data/`)

- **`teacher_files/`**: 老师上传的文件
- **`student_work/`**: 学生提交的作业
- **`metadata.json`**: 文件元数据

## 核心功能

### 老师端功能

1. **文件上传**: 上传文件到服务器，支持描述信息
2. **文件管理**: 查看、下载、删除已上传的文件
3. **作业查看**: 查看学生提交的作业列表
4. **作业管理**: 下载、删除学生作业

### 学生端功能

1. **文件下载**: 下载老师分发的文件
2. **作业上传**: 上传完成的作业到服务器
3. **姓名管理**: 设置和修改学生姓名

### 服务器端功能

1. **文件存储**: 安全的文件存储和管理
2. **API 接口**: 提供完整的 REST API
3. **元数据管理**: 文件信息记录和查询
4. **错误处理**: 完善的错误处理机制

## 技术特点

### 1. 简单易用

- 图形化界面，操作直观
- 无需复杂配置，开箱即用
- 支持所有文件类型

### 2. 安全可靠

- 本地文件存储，数据安全
- 文件唯一命名，避免冲突
- 完善的错误处理

### 3. 易于部署

- 打包为 exe 文件，无需安装 Python
- 支持 Windows 系统
- 提供批处理启动脚本

### 4. 可扩展性

- 模块化设计，易于维护
- REST API 设计，支持扩展
- 支持局域网和互联网部署

## 文件结构

```
school_machine_room_file_transfer/
├── server/                 # 服务器端
│   ├── __init__.py
│   ├── app.py             # Flask应用
│   └── file_manager.py    # 文件管理
├── client/                # 客户端
│   ├── __init__.py
│   ├── teacher_client.py  # 老师端
│   ├── student_client.py  # 学生端
│   └── common.py          # 公共模块
├── data/                  # 数据存储
│   ├── teacher_files/     # 老师文件
│   └── student_work/      # 学生作业
├── dist/                  # 打包输出
├── pyproject.toml         # 项目配置
├── build.py              # 构建脚本
├── test_system.py        # 测试脚本
├── README.md             # 项目说明
├── 使用说明.md           # 用户手册
├── 部署指南.md           # 部署文档
└── 项目总结.md           # 本文档
```

## API 接口

### 老师文件管理

- `GET /api/teacher/files` - 获取文件列表
- `POST /api/teacher/files` - 上传文件
- `GET /api/teacher/files/<id>` - 下载文件
- `DELETE /api/teacher/files/<id>` - 删除文件

### 学生作业管理

- `GET /api/student/work` - 获取作业列表
- `POST /api/student/work` - 上传作业
- `GET /api/student/work/<id>` - 下载作业
- `DELETE /api/student/work/<id>` - 删除作业

### 系统管理

- `GET /api/health` - 健康检查

## 部署方案

### 开发环境

```bash
# 安装依赖
uv sync

# 启动服务器
uv run python server/app.py

# 启动客户端
uv run python client/teacher_client.py
uv run python client/student_client.py
```

### 生产环境

```bash
# 构建exe文件
python build.py

# 部署到目标机器
# 1. 复制dist目录到服务器
# 2. 运行"启动服务器.bat"
# 3. 运行"启动老师端.bat"
# 4. 运行"启动学生端.bat"
```

## 使用流程

### 1. 系统启动

1. 在服务器计算机运行"文件服务器.exe"
2. 在教师计算机运行"老师端.exe"
3. 在学生计算机运行"学生端.exe"

### 2. 文件分发

1. 老师在老师端上传文件
2. 学生在学生端下载文件
3. 学生完成作业后上传

### 3. 作业收集

1. 老师在老师端查看学生作业
2. 下载需要批改的作业
3. 管理学生作业文件

## 技术亮点

### 1. 现代化 Python 工具链

- 使用 uv 作为包管理器，比 pip 更快更可靠
- 采用 pyproject.toml 配置，符合现代 Python 标准

### 2. 用户友好的界面

- 基于 tkinter 的现代化 GUI
- 实时状态显示和进度提示
- 直观的操作流程

### 3. 健壮的错误处理

- 完善的异常处理机制
- 用户友好的错误提示
- 自动重试和恢复

### 4. 灵活的部署选项

- 支持单机部署和网络部署
- 可配置的服务器地址
- 简单的启动脚本

## 未来改进方向

### 1. 功能增强

- 支持文件夹上传下载
- 添加文件预览功能
- 支持批量操作

### 2. 安全加强

- 添加用户认证
- 文件加密存储
- 操作日志记录

### 3. 性能优化

- 大文件分块传输
- 断点续传功能
- 缓存机制

### 4. 界面改进

- 更现代化的 UI 设计
- 主题切换功能
- 多语言支持

## 总结

本项目成功实现了一个简单而实用的学校机房文件传输系统，具有以下优势：

1. **技术简单**: 使用 Python 标准库和常用框架，易于理解和维护
2. **部署简单**: 打包为 exe 文件，无需复杂安装配置
3. **使用简单**: 图形化界面，操作直观易懂
4. **扩展性好**: 模块化设计，便于功能扩展

该系统完全满足学校机房的基本需求，为老师和学生提供了便捷的文件传输解决方案。
