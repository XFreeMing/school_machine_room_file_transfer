# 学校机房文件传输系统 - 使用说明

## 系统概述

本系统专为学校机房内网环境设计，采用简化的双端架构：

- **教师端**：集成文件服务器功能，既是客户端又是服务器
- **学生端**：自动发现并连接教师端，无需手动配置

## 系统要求

- Windows 7/10/11
- 内网环境（教师端和学生端在同一局域网）
- 至少 100MB 可用磁盘空间

## 安装部署

### 方法一：使用预编译版本（推荐）

1. 下载 `dist` 文件夹中的所有文件
2. 将整个文件夹复制到目标计算机
3. 在教师电脑运行 `教师端.exe`
4. 在学生电脑运行 `学生端.exe`

### 方法二：从源码构建

1. 安装 Python 3.8+ 和 uv
2. 在项目目录运行：
   ```bash
   uv sync
   python build.py
   ```

## 使用指南

### 教师端使用

#### 1. 启动教师端

- 双击 `教师端.exe` 或运行 `启动教师端.bat`
- 程序会自动启动内置服务器
- 界面顶部显示本机 IP 地址和连接状态
- 学生端会自动连接到这个地址

#### 2. 上传文件

- 点击"上传文件"按钮
- 选择要分发给学生的文件
- 输入文件描述（可选，用于说明文件用途）
- 点击确定完成上传

#### 3. 管理文件

- 在"我的文件"列表中查看已上传的文件
- 显示文件名、大小、上传时间等信息
- 点击"下载"可以重新下载文件
- 点击"删除"可以删除不需要的文件
- 点击"刷新"更新文件列表

#### 4. 查看学生作业

- 在"学生作业"列表中查看学生提交的作业
- 显示文件名、学生姓名、提交时间等信息
- 点击"下载作业"可以下载学生作业到本地
- 点击"删除作业"可以删除学生作业
- 点击"刷新作业"更新作业列表

### 学生端使用

#### 1. 启动学生端

- 双击 `学生端.exe` 或运行 `启动学生端.bat`
- 首次启动需要输入学生姓名
- 程序会自动搜索同网段的教师端
- 连接成功后界面会显示"已连接到教师端"

#### 2. 下载教师文件

- 在"老师文件"列表中查看可下载的文件
- 选择要下载的文件
- 点击"下载文件"按钮
- 选择保存位置完成下载

#### 3. 上传作业

- 点击"选择作业文件"按钮选择要上传的作业
- 输入作业描述（可选）
- 点击"上传作业"按钮
- 上传成功后可以继续上传其他作业

#### 4. 修改学生姓名

- 点击"修改姓名"按钮
- 输入新的学生姓名
- 姓名修改后立即生效

## 功能特性

### 自动发现机制

- 学生端启动后自动扫描同网段
- 寻找运行在 5000 端口的教师端
- 找到后自动建立连接，无需手动配置

### 文件管理

- 支持所有文件类型（文档、图片、视频等）
- 文件大小限制：100MB
- 自动生成唯一文件名避免冲突
- 按学生姓名组织作业文件

### 用户界面

- 简洁易用的图形界面
- 实时状态显示和进度提示
- 文件大小自动格式化显示
- 操作结果即时反馈

### 数据安全

- 本地文件存储，数据安全可控
- 文件元数据完整记录
- 操作日志和错误处理
- 支持文件恢复和备份

## 网络配置

### 内网部署

- 教师端和学生端必须在同一局域网
- 教师端使用 5000 端口提供服务
- 学生端自动扫描同网段找到教师端

### 防火墙设置

- 确保教师端 5000 端口未被阻止
- Windows 防火墙可能需要允许程序通过
- 建议在内网环境中使用，避免外网安全风险

## 常见问题

### Q: 学生端显示"未找到教师端"

**解决方案**：

1. 确认教师端已启动并显示"服务器运行中"
2. 检查网络连接是否正常
3. 确认教师端和学生端在同一局域网
4. 点击"重新连接"按钮重试
5. 检查防火墙是否阻止了 5000 端口

### Q: 文件上传失败

**解决方案**：

1. 检查文件大小是否超过 100MB 限制
2. 确认磁盘空间是否充足
3. 检查文件是否被其他程序占用
4. 确认网络连接稳定

### Q: 下载文件失败

**解决方案**：

1. 检查文件是否仍然存在
2. 确认保存路径有写入权限
3. 检查磁盘空间是否充足
4. 重新连接教师端

### Q: 学生端无法设置姓名

**解决方案**：

1. 确保输入了有效的姓名
2. 姓名不能为空或只包含空格
3. 重新启动学生端程序
4. 检查输入法是否正常

### Q: 教师端服务器启动失败

**解决方案**：

1. 检查 5000 端口是否被其他程序占用
2. 以管理员身份运行程序
3. 检查防火墙设置
4. 重启计算机后重试

## 技术支持

如遇到技术问题，请检查：

1. **系统兼容性**：确保 Windows 版本符合要求
2. **网络连接**：确认内网连接正常
3. **防火墙设置**：检查端口是否被阻止
4. **程序权限**：确保有文件读写权限
5. **错误日志**：查看程序界面显示的错误信息

## 更新日志

### v2.0.0 - 简化架构版本

- 重新设计为双端架构
- 教师端集成服务器功能
- 学生端自动发现教师端
- 简化部署和使用流程

### v1.0.0 - 初始版本

- 三端架构（服务器+教师端+学生端）
- 基础文件传输功能
- 图形用户界面

## 许可证

本项目仅供学校教学使用，请勿用于商业用途。
