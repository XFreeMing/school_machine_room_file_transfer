# 学校机房文件传输系统

一个简单的文件传输系统，专为学校机房内网环境设计。教师端集成服务器功能，学生端自动发现并连接教师端。

## 功能特性

- **教师端**：集成文件服务器，上传文件，查看学生作业
- **学生端**：自动发现教师端，下载文件，上传作业
- **自动连接**：学生端自动扫描同网段找到教师端
- **简单易用**：图形界面，操作直观
- **易于部署**：打包成 exe 文件，无需安装 Python

## 新架构优势

- **简化部署**：只需两个程序，无需独立服务器
- **自动发现**：学生端自动找到教师端，无需手动配置
- **内网优化**：专为机房内网环境设计
- **即插即用**：教师端启动即可，学生端自动连接

## 项目结构

```
school_machine_room_file_transfer/
├── teacher_app.py          # 教师端（集成服务器）
├── student_app.py          # 学生端（自动连接）
├── data/                   # 数据存储目录
│   ├── teacher_files/      # 教师上传的文件
│   └── student_work/       # 学生提交的作业
├── dist/                   # 打包后的exe文件
├── pyproject.toml          # 项目配置
├── build.py               # 构建脚本
└── README.md              # 说明文档
```

## 快速开始

### 开发环境

1. 安装 uv（如果还没有）：

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

2. 安装依赖：

```bash
uv sync
```

3. 运行程序：

```bash
# 教师端
uv run python teacher_app.py

# 学生端
uv run python student_app.py
```

### 生产环境

1. 构建 exe 文件：

```bash
python build.py
```

2. 部署使用：
   - 在教师电脑运行 `教师端.exe`
   - 在学生电脑运行 `学生端.exe`

## 使用说明

### 教师端使用

1. **启动教师端**

   - 运行 `教师端.exe`
   - 程序会自动启动内置服务器
   - 界面显示本机 IP 地址供学生连接

2. **上传文件**

   - 点击"上传文件"按钮
   - 选择要分发给学生的文件
   - 输入文件描述（可选）

3. **管理文件**

   - 在"我的文件"列表中查看已上传的文件
   - 可以下载或删除文件

4. **查看学生作业**
   - 在"学生作业"列表中查看学生提交的作业
   - 可以下载或删除学生作业

### 学生端使用

1. **启动学生端**

   - 运行 `学生端.exe`
   - 首次启动需要输入学生姓名
   - 程序会自动搜索并连接教师端

2. **下载教师文件**

   - 在"老师文件"列表中查看可下载的文件
   - 选择文件后点击"下载文件"

3. **上传作业**
   - 点击"选择作业文件"选择要上传的作业
   - 输入作业描述（可选）
   - 点击"上传作业"

## 技术特点

### 自动发现机制

- 学生端自动扫描同网段的 5000 端口
- 找到教师端后自动建立连接
- 无需手动配置 IP 地址

### 文件管理

- 支持所有文件类型
- 文件大小限制：100MB
- 自动生成唯一文件名避免冲突
- 按学生姓名组织作业文件

### 用户界面

- 基于 tkinter 的现代化 GUI
- 实时状态显示
- 操作进度提示
- 错误处理和用户提示

## 网络要求

- **内网环境**：教师端和学生端在同一局域网
- **端口要求**：教师端使用 5000 端口
- **防火墙**：确保 5000 端口未被阻止

## 故障排除

### 学生端无法连接教师端

1. 确保教师端已启动
2. 检查网络连接
3. 确认防火墙设置
4. 点击"重新连接"按钮

### 文件上传失败

1. 检查文件大小（限制 100MB）
2. 确认磁盘空间充足
3. 检查文件是否被占用

### 学生端无法设置姓名

1. 确保输入了有效姓名
2. 姓名不能为空
3. 重新启动程序

## 技术栈

- **Python 3.8+**: 主要编程语言
- **tkinter**: GUI 界面
- **Flask**: 内置 Web 服务器
- **requests**: HTTP 客户端
- **PyInstaller**: 打包工具
- **uv**: 项目管理

## 许可证

本项目仅供学校教学使用，请勿用于商业用途。
